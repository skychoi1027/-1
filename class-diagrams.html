<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¶í•©ë¬¸ì–´ - í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }
        h2 {
            color: #555;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        .diagram-container {
            margin: 30px 0;
            padding: 20px;
            background-color: #fafafa;
            border-radius: 5px;
            overflow-x: auto;
        }
        .mermaid {
            text-align: center;
        }
        .note {
            background-color: #e3f2fd;
            padding: 15px;
            border-left: 4px solid #2196F3;
            margin: 20px 0;
            border-radius: 4px;
        }
        .note strong {
            color: #1976D2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”® ê¶í•©ë¬¸ì–´ (SajuMonooApp) - í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨</h1>
        
        <div class="note">
            <strong>ì°¸ê³ :</strong> ì´ ë‹¤ì´ì–´ê·¸ë¨ì€ Mermaid.jsë¥¼ ì‚¬ìš©í•˜ì—¬ ë Œë”ë§ë©ë‹ˆë‹¤. 
            ì£¼ìš” í´ë˜ìŠ¤ì™€ ì»´í¬ë„ŒíŠ¸ì˜ êµ¬ì¡°ë¥¼ ì‹œê°í™”í•©ë‹ˆë‹¤.
        </div>

        <h2>í”„ë¡ íŠ¸ì—”ë“œ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨</h2>
        
        <div class="diagram-container">
            <div class="mermaid">
classDiagram
    class RootLayout {
        +AuthProvider
        +UserDataProvider
        +Stack Navigation
    }
    
    class AuthContext {
        +user: AuthUser
        +isAuthenticated: boolean
        +login(email, password)
        +logout()
        +updateProfile(profile)
    }
    
    class UserDataContext {
        +user1: UserData
        +user2: UserData
        +compatibilityResult: CompatibilityResult
        +setUser1(user)
        +setUser2(user)
        +setCompatibilityResult(result)
    }
    
    class Home {
        +render()
    }
    
    class Input {
        -localUser1: UserData
        -localUser2: UserData
        +handleSubmit()
        +handleLoadProfile()
    }
    
    class Loading {
        +useEffect()
        +calculate()
    }
    
    class Result {
        -score: number
        -explanation: string
        -salData: array
        -saju1: Saju
        -saju2: Saju
        -salAnalysis: array
        +navigateToAI()
    }
    
    class AIAdvice {
        -advice: string
        -tips: array
        -summary: string
        +getAIAdvice()
    }
    
    class AppHeader {
        -title: string
        -showHomeBtn: boolean
        -showAuthBtn: boolean
        +render()
    }
    
    class OctagonGraph {
        -salData: array
        +renderGraph()
    }
    
    class DatePicker {
        -value: string
        +onChange()
    }
    
    class TimePicker {
        -value: string
        +onChange()
    }
    
    class apiClient {
        +apiRequest()
        +getAuthToken()
        +setAuthToken()
        +authAPI
        +aiAPI
    }
    
    class sajuCalculator {
        +calculateSaju()
        +calculateCompatibility()
        -analyzeSal()
    }
    
    class aiService {
        +getAIAdvice()
        +getAIAdviceGemini()
    }
    
    RootLayout --> AuthContext
    RootLayout --> UserDataContext
    Home --> Input
    Input --> Loading
    Loading --> Result
    Result --> AIAdvice
    Result --> AppHeader
    Result --> OctagonGraph
    Input --> DatePicker
    Input --> TimePicker
    AIAdvice --> apiClient
    Loading --> sajuCalculator
    AIAdvice --> aiService
    apiClient --> aiService
            </div>
        </div>

        <h2>ë°±ì—”ë“œ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨</h2>
        
        <div class="diagram-container">
            <div class="mermaid">
classDiagram
    class ExpressServer {
        +PORT: number
        +app: Express
        +listen()
    }
    
    class Middleware {
        +cors()
        +express.json()
    }
    
    class Routes {
        +GET /
        +POST /api/ai-advice
        +POST /api/auth/login
        +POST /api/auth/signup
        +GET /api/auth/profile
        +PUT /api/auth/profile
    }
    
    class HelperFunctions {
        -generatePrompt()
        -parseAIResponse()
        -getDefaultAdvice()
        -getDefaultTips()
    }
    
    class OpenAIService {
        -OpenAI ì¸ìŠ¤í„´ìŠ¤
        -apiKey: string
        -model: string
        -max_tokens: number
        -temperature: number
        +chat.completions.create()
    }
    
    class Database {
        +User Model
        +CompatibilityResult Model
    }
    
    class UserModel {
        -_id: ObjectId
        -email: string
        -password: string
        -name: string
        -profile: object
        -createdAt: Date
        -updatedAt: Date
    }
    
    class CompatibilityResultModel {
        -_id: ObjectId
        -userId: ObjectId
        -user1: object
        -user2: object
        -score: number
        -salAnalysis: array
        -createdAt: Date
    }
    
    class EnvironmentVars {
        -PORT: string
        -OPENAI_API_KEY: string
        -DATABASE_URL: string
        -JWT_SECRET: string
        +dotenv.config()
    }
    
    ExpressServer --> Middleware
    ExpressServer --> Routes
    Routes --> HelperFunctions
    Routes --> OpenAIService
    Routes --> Database
    Database --> UserModel
    Database --> CompatibilityResultModel
    OpenAIService --> EnvironmentVars
    HelperFunctions --> EnvironmentVars
            </div>
        </div>

        <h2>ì£¼ìš” ê´€ê³„ ì„¤ëª…</h2>
        
        <div class="note">
            <strong>í”„ë¡ íŠ¸ì—”ë“œ:</strong><br>
            - RootLayoutì´ AuthContextì™€ UserDataContextë¥¼ ì œê³µí•©ë‹ˆë‹¤.<br>
            - í™”ë©´ ì»´í¬ë„ŒíŠ¸ë“¤ì€ Contextë¥¼ í†µí•´ ìƒíƒœë¥¼ ê³µìœ í•©ë‹ˆë‹¤.<br>
            - Utils ëª¨ë“ˆë“¤ì€ í™”ë©´ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
        </div>
        
        <div class="note">
            <strong>ë°±ì—”ë“œ:</strong><br>
            - ExpressServerê°€ Middlewareì™€ Routesë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.<br>
            - RoutesëŠ” HelperFunctionsì™€ OpenAIServiceë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
            - DatabaseëŠ” í–¥í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.<br>
            - EnvironmentVarsëŠ” í™˜ê²½ ë³€ìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
        </div>
    </div>
</body>
</html>
